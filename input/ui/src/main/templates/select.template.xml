<?xml version="1.0" encoding="UTF-8"?>

<cdk:root xmlns="http://jboss.org/schema/richfaces/cdk/xhtml-el" xmlns:cdk="http://jboss.org/schema/richfaces/cdk/core"
    xmlns:c="http://jboss.org/schema/richfaces/cdk/jstl/core" xmlns:cc="http://jboss.org/schema/richfaces/cdk/jsf/composite"
    xmlns:javaee="http://java.sun.com/xml/ns/javaee">

    <cc:interface>
        <cdk:class>org.richfaces.renderkit.html.SelectRenderer</cdk:class>
        <cdk:superclass>org.richfaces.renderkit.SelectRendererBase</cdk:superclass>
        <cdk:component-family>org.richfaces.Select</cdk:component-family>
        <cdk:renderer-type>org.richfaces.SelectRenderer</cdk:renderer-type>
        <cdk:renders-children>true</cdk:renders-children>
    </cc:interface>

    <cc:implementation>
    
    	<cdk:object type="java.util.List" type-arguments="org.richfaces.renderkit.ClientSelectItem" name="clientSelectItems"
			value="#{getConvertedSelectItems(facesContext, component)}" />
    	
   		<cdk:object type="java.lang.Object" name="disabled" value="#{component.attributes['disabled']}" />
        
        <div id="#{clientId}" class="rf-sel">
            <div style="position : relative; overflow : hidden; text-align : left; padding-right : 18px;">
            	<input id="#{clientId}selValue" name="#{clientId}" type="hidden" value="#{getInputValue(facesContext, component)}"/>
            	<div id="#{clientId}Field"  class="rf-sel-fld">
	            	<input cdk:passThroughWithExclusions="class autocomplete id value disabled name type readonly onchange onblur onfocus" 
						id="#{clientId}Input" 
						value="#{getSelectLabel(facesContext, component)}"  
						disabled="#{disabled}" 
						name="#{clientId}Input"
						type="text" 
						class="rf-sel-inp" 
						autocomplete="off"
						readonly="#{component.attributes['enableManualInput'] ? '' : 'readonly'}"/>
            	</div>
                <c:if test="#{component.attributes['showButton']}">
	                <c:if test="#{component.attributes['disabled']}">
		                <div id="#{clientId}Button" class="rf-sel-btn">
		                    <div class="rf-sel-btn-arrow"></div>
		                </div>
	                </c:if>
	                <c:if test="#{!component.attributes['disabled']}">
		                <div id="#{clientId}Button" class="rf-sel-btn">
		                    <div class="rf-sel-btn-arrow"></div>
		                </div>
	                </c:if>
                </c:if>
            </div>

            <div id="#{clientId}List" class="#{getListCss(component)}">
				<cdk:call expression="renderListHandlers(facesContext, component);"/>
                <div class="rf-sel-shdw">
                    <div class="rf-sel-shdw-t"></div>
                    <div class="rf-sel-shdw-l"></div>
                    <div class="rf-sel-shdw-r"></div>
                    <div class="rf-sel-shdw-b"></div>

                    <div class="rf-sel-lst-dcrtn">
                    	<div class="rf-sel-lst-scrl" style="#{encodeHeightAndWidth(component)}">
	                        <div id="#{clientId}Items" >
								<cdk:call expression="encodeItems(facesContext, component, clientSelectItems);"/>
							</div>
						</div>
                    </div>
                </div>
            </div>
            <script type="text/javascript">
				<cdk:scriptObject name="options">
                    <cdk:scriptOption name="items" value="#{clientSelectItems}" />
                    <cdk:scriptOption name="itemCss" value="rf-sel-opt" />
                    <cdk:scriptOption name="selectItemCss" value="#{concatClasses('rf-sel-sel', component.attributes['selectItemClass'])}" />
                    <cdk:scriptOption attributes="onbegin oncomplete onerror onbeforedomupdate onchange onblur onselectitem onfocus" wrapper="eventHandler"/>
					<cdk:scriptOption attributes="showControl defaultLabel enableManualInput selectFirst" />
                </cdk:scriptObject>
            	new RichFaces.ui.Select("#{clientId}", #{toScriptArgs(options)});
            </script>
        </div>
    </cc:implementation>
</cdk:root>
